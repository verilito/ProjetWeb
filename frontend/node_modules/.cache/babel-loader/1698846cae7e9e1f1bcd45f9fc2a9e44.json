{"ast":null,"code":"var Storage = require(\"./storage\");\n\nvar cookie = require(\"./cookie\");\n\nvar _storage_support = true;\n\ntry {\n  window.localStorage.setItem(\"test\", \"42\");\n  window.sessionStorage.setItem(\"test\", \"42\");\n} catch (e) {\n  _storage_support = false;\n}\n\nif (_storage_support) {\n  window.localStorage.removeItem(\"test\");\n  window.sessionStorage.removeItem(\"test\");\n  module.exports = {\n    localStorage: window.localStorage,\n    sessionStorage: window.sessionStorage\n  };\n} else {\n  var lsCookie = cookie.read(\"localStorage\");\n  var ls = new Storage(lsCookie ? JSON.parse(lsCookie) : {}, // init\n  function (data) {\n    // set\n    cookie.create(\"localStorage\", JSON.stringify(data), 365);\n  }, function () {\n    // clear\n    cookie.create(\"localStorage\", \"\", 365);\n  });\n  var ss = new Storage();\n  module.exports = {\n    localStorage: ls,\n    sessionStorage: ss\n  };\n}","map":null,"metadata":{},"sourceType":"script"}