{"ast":null,"code":"/*!\n * typeahead.js 0.11.1\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT\n */\n!function (a, b) {\n  \"function\" == typeof define && define.amd ? define(\"bloodhound\", [\"jquery\"], function (c) {\n    return a.Bloodhound = b(c);\n  }) : \"object\" == typeof exports ? module.exports = b(require(\"jquery\")) : a.Bloodhound = b(jQuery);\n}(this, function (a) {\n  var b = function () {\n    \"use strict\";\n\n    return {\n      isMsie: function () {\n        return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : !1;\n      },\n      isBlankString: function (a) {\n        return !a || /^\\s*$/.test(a);\n      },\n      escapeRegExChars: function (a) {\n        return a.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n      },\n      isString: function (a) {\n        return \"string\" == typeof a;\n      },\n      isNumber: function (a) {\n        return \"number\" == typeof a;\n      },\n      isArray: a.isArray,\n      isFunction: a.isFunction,\n      isObject: a.isPlainObject,\n      isUndefined: function (a) {\n        return \"undefined\" == typeof a;\n      },\n      isElement: function (a) {\n        return !(!a || 1 !== a.nodeType);\n      },\n      isJQuery: function (b) {\n        return b instanceof a;\n      },\n      toStr: function (a) {\n        return b.isUndefined(a) || null === a ? \"\" : a + \"\";\n      },\n      bind: a.proxy,\n      each: function (b, c) {\n        function d(a, b) {\n          return c(b, a);\n        }\n\n        a.each(b, d);\n      },\n      map: a.map,\n      filter: a.grep,\n      every: function (b, c) {\n        var d = !0;\n        return b ? (a.each(b, function (a, e) {\n          return (d = c.call(null, e, a, b)) ? void 0 : !1;\n        }), !!d) : d;\n      },\n      some: function (b, c) {\n        var d = !1;\n        return b ? (a.each(b, function (a, e) {\n          return (d = c.call(null, e, a, b)) ? !1 : void 0;\n        }), !!d) : d;\n      },\n      mixin: a.extend,\n      identity: function (a) {\n        return a;\n      },\n      clone: function (b) {\n        return a.extend(!0, {}, b);\n      },\n      getIdGenerator: function () {\n        var a = 0;\n        return function () {\n          return a++;\n        };\n      },\n      templatify: function (b) {\n        function c() {\n          return String(b);\n        }\n\n        return a.isFunction(b) ? b : c;\n      },\n      defer: function (a) {\n        setTimeout(a, 0);\n      },\n      debounce: function (a, b, c) {\n        var d, e;\n        return function () {\n          var f,\n              g,\n              h = this,\n              i = arguments;\n          return f = function () {\n            d = null, c || (e = a.apply(h, i));\n          }, g = c && !d, clearTimeout(d), d = setTimeout(f, b), g && (e = a.apply(h, i)), e;\n        };\n      },\n      throttle: function (a, b) {\n        var c, d, e, f, g, h;\n        return g = 0, h = function () {\n          g = new Date(), e = null, f = a.apply(c, d);\n        }, function () {\n          var i = new Date(),\n              j = b - (i - g);\n          return c = this, d = arguments, 0 >= j ? (clearTimeout(e), e = null, g = i, f = a.apply(c, d)) : e || (e = setTimeout(h, j)), f;\n        };\n      },\n      stringify: function (a) {\n        return b.isString(a) ? a : JSON.stringify(a);\n      },\n      noop: function () {}\n    };\n  }(),\n      c = \"0.11.1\",\n      d = function () {\n    \"use strict\";\n\n    function a(a) {\n      return a = b.toStr(a), a ? a.split(/\\s+/) : [];\n    }\n\n    function c(a) {\n      return a = b.toStr(a), a ? a.split(/\\W+/) : [];\n    }\n\n    function d(a) {\n      return function (c) {\n        return c = b.isArray(c) ? c : [].slice.call(arguments, 0), function (d) {\n          var e = [];\n          return b.each(c, function (c) {\n            e = e.concat(a(b.toStr(d[c])));\n          }), e;\n        };\n      };\n    }\n\n    return {\n      nonword: c,\n      whitespace: a,\n      obj: {\n        nonword: d(c),\n        whitespace: d(a)\n      }\n    };\n  }(),\n      e = function () {\n    \"use strict\";\n\n    function c(c) {\n      this.maxSize = b.isNumber(c) ? c : 100, this.reset(), this.maxSize <= 0 && (this.set = this.get = a.noop);\n    }\n\n    function d() {\n      this.head = this.tail = null;\n    }\n\n    function e(a, b) {\n      this.key = a, this.val = b, this.prev = this.next = null;\n    }\n\n    return b.mixin(c.prototype, {\n      set: function (a, b) {\n        var c,\n            d = this.list.tail;\n        this.size >= this.maxSize && (this.list.remove(d), delete this.hash[d.key], this.size--), (c = this.hash[a]) ? (c.val = b, this.list.moveToFront(c)) : (c = new e(a, b), this.list.add(c), this.hash[a] = c, this.size++);\n      },\n      get: function (a) {\n        var b = this.hash[a];\n        return b ? (this.list.moveToFront(b), b.val) : void 0;\n      },\n      reset: function () {\n        this.size = 0, this.hash = {}, this.list = new d();\n      }\n    }), b.mixin(d.prototype, {\n      add: function (a) {\n        this.head && (a.next = this.head, this.head.prev = a), this.head = a, this.tail = this.tail || a;\n      },\n      remove: function (a) {\n        a.prev ? a.prev.next = a.next : this.head = a.next, a.next ? a.next.prev = a.prev : this.tail = a.prev;\n      },\n      moveToFront: function (a) {\n        this.remove(a), this.add(a);\n      }\n    }), c;\n  }(),\n      f = function () {\n    \"use strict\";\n\n    function c(a, c) {\n      this.prefix = [\"__\", a, \"__\"].join(\"\"), this.ttlKey = \"__ttl__\", this.keyMatcher = new RegExp(\"^\" + b.escapeRegExChars(this.prefix)), this.ls = c || h, !this.ls && this._noop();\n    }\n\n    function d() {\n      return new Date().getTime();\n    }\n\n    function e(a) {\n      return JSON.stringify(b.isUndefined(a) ? null : a);\n    }\n\n    function f(b) {\n      return a.parseJSON(b);\n    }\n\n    function g(a) {\n      var b,\n          c,\n          d = [],\n          e = h.length;\n\n      for (b = 0; e > b; b++) (c = h.key(b)).match(a) && d.push(c.replace(a, \"\"));\n\n      return d;\n    }\n\n    var h;\n\n    try {\n      h = window.localStorage, h.setItem(\"~~~\", \"!\"), h.removeItem(\"~~~\");\n    } catch (i) {\n      h = null;\n    }\n\n    return b.mixin(c.prototype, {\n      _prefix: function (a) {\n        return this.prefix + a;\n      },\n      _ttlKey: function (a) {\n        return this._prefix(a) + this.ttlKey;\n      },\n      _noop: function () {\n        this.get = this.set = this.remove = this.clear = this.isExpired = b.noop;\n      },\n      _safeSet: function (a, b) {\n        try {\n          this.ls.setItem(a, b);\n        } catch (c) {\n          \"QuotaExceededError\" === c.name && (this.clear(), this._noop());\n        }\n      },\n      get: function (a) {\n        return this.isExpired(a) && this.remove(a), f(this.ls.getItem(this._prefix(a)));\n      },\n      set: function (a, c, f) {\n        return b.isNumber(f) ? this._safeSet(this._ttlKey(a), e(d() + f)) : this.ls.removeItem(this._ttlKey(a)), this._safeSet(this._prefix(a), e(c));\n      },\n      remove: function (a) {\n        return this.ls.removeItem(this._ttlKey(a)), this.ls.removeItem(this._prefix(a)), this;\n      },\n      clear: function () {\n        var a,\n            b = g(this.keyMatcher);\n\n        for (a = b.length; a--;) this.remove(b[a]);\n\n        return this;\n      },\n      isExpired: function (a) {\n        var c = f(this.ls.getItem(this._ttlKey(a)));\n        return b.isNumber(c) && d() > c ? !0 : !1;\n      }\n    }), c;\n  }(),\n      g = function () {\n    \"use strict\";\n\n    function c(a) {\n      a = a || {}, this.cancelled = !1, this.lastReq = null, this._send = a.transport, this._get = a.limiter ? a.limiter(this._get) : this._get, this._cache = a.cache === !1 ? new e(0) : h;\n    }\n\n    var d = 0,\n        f = {},\n        g = 6,\n        h = new e(10);\n    return c.setMaxPendingRequests = function (a) {\n      g = a;\n    }, c.resetCache = function () {\n      h.reset();\n    }, b.mixin(c.prototype, {\n      _fingerprint: function (b) {\n        return b = b || {}, b.url + b.type + a.param(b.data || {});\n      },\n      _get: function (a, b) {\n        function c(a) {\n          b(null, a), k._cache.set(i, a);\n        }\n\n        function e() {\n          b(!0);\n        }\n\n        function h() {\n          d--, delete f[i], k.onDeckRequestArgs && (k._get.apply(k, k.onDeckRequestArgs), k.onDeckRequestArgs = null);\n        }\n\n        var i,\n            j,\n            k = this;\n        i = this._fingerprint(a), this.cancelled || i !== this.lastReq || ((j = f[i]) ? j.done(c).fail(e) : g > d ? (d++, f[i] = this._send(a).done(c).fail(e).always(h)) : this.onDeckRequestArgs = [].slice.call(arguments, 0));\n      },\n      get: function (c, d) {\n        var e, f;\n        d = d || a.noop, c = b.isString(c) ? {\n          url: c\n        } : c || {}, f = this._fingerprint(c), this.cancelled = !1, this.lastReq = f, (e = this._cache.get(f)) ? d(null, e) : this._get(c, d);\n      },\n      cancel: function () {\n        this.cancelled = !0;\n      }\n    }), c;\n  }(),\n      h = window.SearchIndex = function () {\n    \"use strict\";\n\n    function c(c) {\n      c = c || {}, c.datumTokenizer && c.queryTokenizer || a.error(\"datumTokenizer and queryTokenizer are both required\"), this.identify = c.identify || b.stringify, this.datumTokenizer = c.datumTokenizer, this.queryTokenizer = c.queryTokenizer, this.reset();\n    }\n\n    function d(a) {\n      return a = b.filter(a, function (a) {\n        return !!a;\n      }), a = b.map(a, function (a) {\n        return a.toLowerCase();\n      });\n    }\n\n    function e() {\n      var a = {};\n      return a[i] = [], a[h] = {}, a;\n    }\n\n    function f(a) {\n      for (var b = {}, c = [], d = 0, e = a.length; e > d; d++) b[a[d]] || (b[a[d]] = !0, c.push(a[d]));\n\n      return c;\n    }\n\n    function g(a, b) {\n      var c = 0,\n          d = 0,\n          e = [];\n      a = a.sort(), b = b.sort();\n\n      for (var f = a.length, g = b.length; f > c && g > d;) a[c] < b[d] ? c++ : a[c] > b[d] ? d++ : (e.push(a[c]), c++, d++);\n\n      return e;\n    }\n\n    var h = \"c\",\n        i = \"i\";\n    return b.mixin(c.prototype, {\n      bootstrap: function (a) {\n        this.datums = a.datums, this.trie = a.trie;\n      },\n      add: function (a) {\n        var c = this;\n        a = b.isArray(a) ? a : [a], b.each(a, function (a) {\n          var f, g;\n          c.datums[f = c.identify(a)] = a, g = d(c.datumTokenizer(a)), b.each(g, function (a) {\n            var b, d, g;\n\n            for (b = c.trie, d = a.split(\"\"); g = d.shift();) b = b[h][g] || (b[h][g] = e()), b[i].push(f);\n          });\n        });\n      },\n      get: function (a) {\n        var c = this;\n        return b.map(a, function (a) {\n          return c.datums[a];\n        });\n      },\n      search: function (a) {\n        var c,\n            e,\n            j = this;\n        return c = d(this.queryTokenizer(a)), b.each(c, function (a) {\n          var b, c, d, f;\n          if (e && 0 === e.length) return !1;\n\n          for (b = j.trie, c = a.split(\"\"); b && (d = c.shift());) b = b[h][d];\n\n          return b && 0 === c.length ? (f = b[i].slice(0), void (e = e ? g(e, f) : f)) : (e = [], !1);\n        }), e ? b.map(f(e), function (a) {\n          return j.datums[a];\n        }) : [];\n      },\n      all: function () {\n        var a = [];\n\n        for (var b in this.datums) a.push(this.datums[b]);\n\n        return a;\n      },\n      reset: function () {\n        this.datums = {}, this.trie = e();\n      },\n      serialize: function () {\n        return {\n          datums: this.datums,\n          trie: this.trie\n        };\n      }\n    }), c;\n  }(),\n      i = function () {\n    \"use strict\";\n\n    function a(a) {\n      this.url = a.url, this.ttl = a.ttl, this.cache = a.cache, this.prepare = a.prepare, this.transform = a.transform, this.transport = a.transport, this.thumbprint = a.thumbprint, this.storage = new f(a.cacheKey);\n    }\n\n    var c;\n    return c = {\n      data: \"data\",\n      protocol: \"protocol\",\n      thumbprint: \"thumbprint\"\n    }, b.mixin(a.prototype, {\n      _settings: function () {\n        return {\n          url: this.url,\n          type: \"GET\",\n          dataType: \"json\"\n        };\n      },\n      store: function (a) {\n        this.cache && (this.storage.set(c.data, a, this.ttl), this.storage.set(c.protocol, location.protocol, this.ttl), this.storage.set(c.thumbprint, this.thumbprint, this.ttl));\n      },\n      fromCache: function () {\n        var a,\n            b = {};\n        return this.cache ? (b.data = this.storage.get(c.data), b.protocol = this.storage.get(c.protocol), b.thumbprint = this.storage.get(c.thumbprint), a = b.thumbprint !== this.thumbprint || b.protocol !== location.protocol, b.data && !a ? b.data : null) : null;\n      },\n      fromNetwork: function (a) {\n        function b() {\n          a(!0);\n        }\n\n        function c(b) {\n          a(null, e.transform(b));\n        }\n\n        var d,\n            e = this;\n        a && (d = this.prepare(this._settings()), this.transport(d).fail(b).done(c));\n      },\n      clear: function () {\n        return this.storage.clear(), this;\n      }\n    }), a;\n  }(),\n      j = function () {\n    \"use strict\";\n\n    function a(a) {\n      this.url = a.url, this.prepare = a.prepare, this.transform = a.transform, this.transport = new g({\n        cache: a.cache,\n        limiter: a.limiter,\n        transport: a.transport\n      });\n    }\n\n    return b.mixin(a.prototype, {\n      _settings: function () {\n        return {\n          url: this.url,\n          type: \"GET\",\n          dataType: \"json\"\n        };\n      },\n      get: function (a, b) {\n        function c(a, c) {\n          b(a ? [] : e.transform(c));\n        }\n\n        var d,\n            e = this;\n        if (b) return a = a || \"\", d = this.prepare(a, this._settings()), this.transport.get(d, c);\n      },\n      cancelLastRequest: function () {\n        this.transport.cancel();\n      }\n    }), a;\n  }(),\n      k = function () {\n    \"use strict\";\n\n    function d(d) {\n      var e;\n      return d ? (e = {\n        url: null,\n        ttl: 864e5,\n        cache: !0,\n        cacheKey: null,\n        thumbprint: \"\",\n        prepare: b.identity,\n        transform: b.identity,\n        transport: null\n      }, d = b.isString(d) ? {\n        url: d\n      } : d, d = b.mixin(e, d), !d.url && a.error(\"prefetch requires url to be set\"), d.transform = d.filter || d.transform, d.cacheKey = d.cacheKey || d.url, d.thumbprint = c + d.thumbprint, d.transport = d.transport ? h(d.transport) : a.ajax, d) : null;\n    }\n\n    function e(c) {\n      var d;\n      if (c) return d = {\n        url: null,\n        cache: !0,\n        prepare: null,\n        replace: null,\n        wildcard: null,\n        limiter: null,\n        rateLimitBy: \"debounce\",\n        rateLimitWait: 300,\n        transform: b.identity,\n        transport: null\n      }, c = b.isString(c) ? {\n        url: c\n      } : c, c = b.mixin(d, c), !c.url && a.error(\"remote requires url to be set\"), c.transform = c.filter || c.transform, c.prepare = f(c), c.limiter = g(c), c.transport = c.transport ? h(c.transport) : a.ajax, delete c.replace, delete c.wildcard, delete c.rateLimitBy, delete c.rateLimitWait, c;\n    }\n\n    function f(a) {\n      function b(a, b) {\n        return b.url = f(b.url, a), b;\n      }\n\n      function c(a, b) {\n        return b.url = b.url.replace(g, encodeURIComponent(a)), b;\n      }\n\n      function d(a, b) {\n        return b;\n      }\n\n      var e, f, g;\n      return e = a.prepare, f = a.replace, g = a.wildcard, e ? e : e = f ? b : a.wildcard ? c : d;\n    }\n\n    function g(a) {\n      function c(a) {\n        return function (c) {\n          return b.debounce(c, a);\n        };\n      }\n\n      function d(a) {\n        return function (c) {\n          return b.throttle(c, a);\n        };\n      }\n\n      var e, f, g;\n      return e = a.limiter, f = a.rateLimitBy, g = a.rateLimitWait, e || (e = /^throttle$/i.test(f) ? d(g) : c(g)), e;\n    }\n\n    function h(c) {\n      return function (d) {\n        function e(a) {\n          b.defer(function () {\n            g.resolve(a);\n          });\n        }\n\n        function f(a) {\n          b.defer(function () {\n            g.reject(a);\n          });\n        }\n\n        var g = a.Deferred();\n        return c(d, e, f), g;\n      };\n    }\n\n    return function (c) {\n      var f, g;\n      return f = {\n        initialize: !0,\n        identify: b.stringify,\n        datumTokenizer: null,\n        queryTokenizer: null,\n        sufficient: 5,\n        sorter: null,\n        local: [],\n        prefetch: null,\n        remote: null\n      }, c = b.mixin(f, c || {}), !c.datumTokenizer && a.error(\"datumTokenizer is required\"), !c.queryTokenizer && a.error(\"queryTokenizer is required\"), g = c.sorter, c.sorter = g ? function (a) {\n        return a.sort(g);\n      } : b.identity, c.local = b.isFunction(c.local) ? c.local() : c.local, c.prefetch = d(c.prefetch), c.remote = e(c.remote), c;\n    };\n  }(),\n      l = function () {\n    \"use strict\";\n\n    function c(a) {\n      a = k(a), this.sorter = a.sorter, this.identify = a.identify, this.sufficient = a.sufficient, this.local = a.local, this.remote = a.remote ? new j(a.remote) : null, this.prefetch = a.prefetch ? new i(a.prefetch) : null, this.index = new h({\n        identify: this.identify,\n        datumTokenizer: a.datumTokenizer,\n        queryTokenizer: a.queryTokenizer\n      }), a.initialize !== !1 && this.initialize();\n    }\n\n    var e;\n    return e = window && window.Bloodhound, c.noConflict = function () {\n      return window && (window.Bloodhound = e), c;\n    }, c.tokenizers = d, b.mixin(c.prototype, {\n      __ttAdapter: function () {\n        function a(a, b, d) {\n          return c.search(a, b, d);\n        }\n\n        function b(a, b) {\n          return c.search(a, b);\n        }\n\n        var c = this;\n        return this.remote ? a : b;\n      },\n      _loadPrefetch: function () {\n        function b(a, b) {\n          return a ? c.reject() : (e.add(b), e.prefetch.store(e.index.serialize()), void c.resolve());\n        }\n\n        var c,\n            d,\n            e = this;\n        return c = a.Deferred(), this.prefetch ? (d = this.prefetch.fromCache()) ? (this.index.bootstrap(d), c.resolve()) : this.prefetch.fromNetwork(b) : c.resolve(), c.promise();\n      },\n      _initialize: function () {\n        function a() {\n          b.add(b.local);\n        }\n\n        var b = this;\n        return this.clear(), (this.initPromise = this._loadPrefetch()).done(a), this.initPromise;\n      },\n      initialize: function (a) {\n        return !this.initPromise || a ? this._initialize() : this.initPromise;\n      },\n      add: function (a) {\n        return this.index.add(a), this;\n      },\n      get: function (a) {\n        return a = b.isArray(a) ? a : [].slice.call(arguments), this.index.get(a);\n      },\n      search: function (a, c, d) {\n        function e(a) {\n          var c = [];\n          b.each(a, function (a) {\n            !b.some(f, function (b) {\n              return g.identify(a) === g.identify(b);\n            }) && c.push(a);\n          }), d && d(c);\n        }\n\n        var f,\n            g = this;\n        return f = this.sorter(this.index.search(a)), c(this.remote ? f.slice() : f), this.remote && f.length < this.sufficient ? this.remote.get(a, e) : this.remote && this.remote.cancelLastRequest(), this;\n      },\n      all: function () {\n        return this.index.all();\n      },\n      clear: function () {\n        return this.index.reset(), this;\n      },\n      clearPrefetchCache: function () {\n        return this.prefetch && this.prefetch.clear(), this;\n      },\n      clearRemoteCache: function () {\n        return g.resetCache(), this;\n      },\n      ttAdapter: function () {\n        return this.__ttAdapter();\n      }\n    }), c;\n  }();\n\n  return l;\n});","map":null,"metadata":{},"sourceType":"script"}