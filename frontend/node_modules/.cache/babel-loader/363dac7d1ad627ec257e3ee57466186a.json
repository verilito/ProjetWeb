{"ast":null,"code":"var numKeys = require(\"./num-keys\");\n\nfunction Storage(obj, set, clear) {\n  this._obj = obj || {};\n  this._set = set;\n  this._clear = clear;\n  this.length = 0;\n}\n\nvar proto = Storage.prototype; // html5 storage api\n\nproto.setItem = function (k, v) {\n  k = encodeURIComponent(k);\n  this._obj[k] = v;\n\n  this._updateLength();\n\n  if (this._set) this._set(this._obj);\n};\n\nproto.getItem = function (k) {\n  k = encodeURIComponent(k);\n  return this._obj[k] === undefined ? null : this._obj[k];\n};\n\nproto.removeItem = function (k) {\n  k = encodeURIComponent(k);\n  delete this._obj[k];\n\n  this._updateLength();\n\n  if (this._set) this._set(this._obj);\n};\n\nproto.key = function (i) {\n  var ctr = 0;\n\n  for (var k in this._obj) {\n    if (ctr === i) return decodeURIComponent(k);else ctr++;\n  }\n\n  return null;\n};\n\nproto.clear = function () {\n  delete this[\"_obj\"];\n  if (this._clear) this._clear();\n}; // private\n\n\nproto._updateLength = function () {\n  this.length = numKeys(this._obj);\n};\n\nmodule.exports = Storage;","map":null,"metadata":{},"sourceType":"script"}